---
import BaseLayout from "../layouts/BaseLayout.astro";

const base = import.meta.env.BASE_URL;

const allPlayers = [
  { id: 1, name: "Lasseh" },
  { id: 2, name: "Intercambing" },
  { id: 3, name: "siiphs" },
  { id: 4, name: "suntanCTM" },
  { id: 5, name: "paxyh" },
  { id: 6, name: "Mathi" },
  { id: 7, name: "Renscereol" },
  { id: 8, name: "Deruz" },
  { id: 9, name: "Dylson" },
  { id: 10, name: "MonkiDonki" },
  { id: 11, name: "Azubux1" },
  { id: 12, name: "Touche" },
  { id: 13, name: "NagaZer" },
  { id: 14, name: "tfge" },
  { id: 15, name: "nekore" },
  { id: 16, name: "Shiny Froakie" },
  { id: 17, name: "???" },
];

const games = [
  "osu!",
  "WarioWare",
  "Smash Bros",
  "Mario Kart",
  "Wii Sports",
  "Move or Die",
  "TETR.IO",
  "Mario Strikers",
  "Cachip√∫n",
  "Chess Blitz",
  "ESPECIAL"
];
---

<BaseLayout title="Torre del Mago - Administraci√≥n">
  <!-- Modal de contrase√±a -->
  <div id="passwordModal" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50">
    <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-md w-full mx-4">
      <h2 class="text-2xl font-bold mb-4 font-space-mono text-center">
        Acceso Restringido
      </h2>
      <p class="text-gray-600 mb-6 text-center">
        Ingresa la contrase√±a para acceder al panel de grupos
      </p>
      <input 
        type="password" 
        id="passwordInput"
        placeholder="Contrase√±a"
        class="w-full p-3 border-2 border-gray-300 rounded-lg mb-4 font-semibold"
      />
      <button 
        id="submitPassword"
        class="w-full bg-[var(--color-accent)] text-white px-6 py-3 rounded-lg font-bold hover:opacity-90 transition"
      >
        Entrar
      </button>
      <p id="errorMessage" class="text-red-600 text-sm mt-2 hidden text-center">
        Contrase√±a incorrecta
      </p>
    </div>
  </div>

  <!-- Contenido oculto inicialmente -->
  <div id="adminContent" class="hidden">
    <section class="max-w-7xl mx-auto px-6 py-12">
    
    <h1 class="text-5xl font-bold text-center mb-12 font-space-mono text-[var(--color-text)]">
      Fase de Grupos
    </h1>

    <!-- Tabs de Grupos -->
    <div class="flex justify-center gap-4 mb-8 flex-wrap">
      <button 
        class="group-tab active bg-[var(--color-accent)] text-white px-6 py-3 rounded-lg font-bold transition hover:opacity-90"
        data-group="A"
      >
        Grupo A
      </button>
      <button 
        class="group-tab bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-bold transition hover:bg-gray-400"
        data-group="B"
      >
        Grupo B
      </button>
      <button 
        class="group-tab bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-bold transition hover:bg-gray-400"
        data-group="C"
      >
        Grupo C
      </button>
      <button 
        class="group-tab bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-bold transition hover:bg-gray-400"
        data-group="D"
      >
        Grupo D
      </button>
    </div>

    <!-- Contenedor de Grupos -->
    <div id="groupsContainer">
      
      <!-- Grupo A -->
      <div class="group-content" data-group="A">
        <div class="bg-white/90 rounded-2xl shadow-2xl p-8 border-4 border-[var(--color-navbar)]">
          
          <!-- Selector de Jugadores -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Seleccionar Jugadores del Grupo A
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <select id="playerA1" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 1</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerA2" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 2</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerA3" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 3</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerA4" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 4</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
            </div>
            <button 
              id="saveGroupA"
              class="mt-4 bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition"
            >
              Guardar Grupo A
            </button>
          </div>

          <!-- Tabla de Posiciones -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Tabla de Posiciones
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full border-collapse">
                  <thead>
                    <tr class="bg-[var(--color-navbar)]">
                      <th class="p-3 text-left font-bold">Pos</th>
                      <th class="p-3 text-left font-bold">Jugador</th>
                      <th class="p-3 text-center font-bold">PJ</th>
                      <th class="p-3 text-center font-bold">G</th>
                      <th class="p-3 text-center font-bold">P</th>
                      <th class="p-3 text-center font-bold">Pts</th>
                    </tr>
                  </thead>
                  <tbody id="standingsA">
                  <tr class="border-b">
                    <td colspan="6" class="p-4 text-center text-gray-500">
                      Selecciona los jugadores del grupo
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

<!-- Registrar Partidos -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Registrar Partido
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <select id="matchPlayer1A" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 1</option>
              </select>
              <select id="matchPlayer2A" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 2</option>
              </select>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <select id="matchGameA" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Seleccionar Juego</option>
                {games.map(game => (
                  <option value={game}>{game}</option>
                ))}
              </select>
              <select id="matchWinnerA" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Ganador</option>
                <option value="1">Jugador 1</option>
                <option value="2">Jugador 2</option>
              </select>
            </div>
            <div class="flex gap-4">
              <button 
                id="addMatchA"
                class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition"
              >
                Registrar Partido
              </button>
              <button 
                id="resetGroupA"
                class="bg-red-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-red-700 transition"
              >
                üóëÔ∏è Resetear Grupo
              </button>
            </div>
          </div>

          <!-- Historial de Partidos -->
          <div>
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Historial de Partidos
            </h2>
            <div id="matchHistoryA" class="space-y-3">
              <p class="text-gray-500 text-center">No hay partidos registrados</p>
            </div>
          </div>

        </div>
      </div>

<!-- Grupo B -->
      <div class="group-content hidden" data-group="B">
        <div class="bg-white/90 rounded-2xl shadow-2xl p-8 border-4 border-[var(--color-navbar)]">
          
          <!-- Selector de Jugadores -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Seleccionar Jugadores del Grupo B
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <select id="playerB1" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 1</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerB2" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 2</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerB3" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 3</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerB4" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 4</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
            </div>
            <button 
              id="saveGroupB"
              class="mt-4 bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition"
            >
              Guardar Grupo B
            </button>
          </div>

          <!-- Tabla de Posiciones -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Tabla de Posiciones
            </h2>
            <div class="overflow-x-auto">
              <table class="w-full border-collapse">
                <thead>
                  <tr class="bg-[var(--color-navbar)]">
                    <th class="p-3 text-left font-bold">Pos</th>
                    <th class="p-3 text-left font-bold">Jugador</th>
                    <th class="p-3 text-center font-bold">PJ</th>
                    <th class="p-3 text-center font-bold">G</th>
                    <th class="p-3 text-center font-bold">P</th>
                    <th class="p-3 text-center font-bold">Pts</th>
                  </tr>
                </thead>
                <tbody id="standingsB">
                  <tr class="border-b">
                    <td colspan="6" class="p-4 text-center text-gray-500">
                      Selecciona los jugadores del grupo
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Registrar Partidos -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Registrar Partido
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <select id="matchPlayer1B" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 1</option>
              </select>
              <select id="matchPlayer2B" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 2</option>
              </select>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <select id="matchGameB" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Seleccionar Juego</option>
                {games.map(game => (
                  <option value={game}>{game}</option>
                ))}
              </select>
              <select id="matchWinnerB" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Ganador</option>
                <option value="1">Jugador 1</option>
                <option value="2">Jugador 2</option>
              </select>
            </div>
            <div class="flex gap-4">
              <button 
                id="addMatchB"
                class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition"
              >
                Registrar Partido
              </button>
              <button 
                id="resetGroupB"
                class="bg-red-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-red-700 transition"
              >
                üóëÔ∏è Resetear Grupo
              </button>
            </div>
          </div>

          <!-- Historial de Partidos -->
          <div>
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Historial de Partidos
            </h2>
            <div id="matchHistoryB" class="space-y-3">
              <p class="text-gray-500 text-center">No hay partidos registrados</p>
            </div>
          </div>

        </div>
      </div>

      <!-- Grupo C -->
      <div class="group-content hidden" data-group="C">
        <div class="bg-white/90 rounded-2xl shadow-2xl p-8 border-4 border-[var(--color-navbar)]">
          
          <!-- Selector de Jugadores -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Seleccionar Jugadores del Grupo C
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <select id="playerC1" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 1</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerC2" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 2</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerC3" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 3</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerC4" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 4</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
            </div>
            <button 
              id="saveGroupC"
              class="mt-4 bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition"
            >
              Guardar Grupo C
            </button>
          </div>

          <!-- Tabla de Posiciones -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Tabla de Posiciones
            </h2>
            <div class="overflow-x-auto">
              <table class="w-full border-collapse">
                <thead>
                  <tr class="bg-[var(--color-navbar)]">
                    <th class="p-3 text-left font-bold">Pos</th>
                    <th class="p-3 text-left font-bold">Jugador</th>
                    <th class="p-3 text-center font-bold">PJ</th>
                    <th class="p-3 text-center font-bold">G</th>
                    <th class="p-3 text-center font-bold">P</th>
                    <th class="p-3 text-center font-bold">Pts</th>
                  </tr>
                </thead>
                <tbody id="standingsC">
                  <tr class="border-b">
                    <td colspan="6" class="p-4 text-center text-gray-500">
                      Selecciona los jugadores del grupo
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Registrar Partidos -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Registrar Partido
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <select id="matchPlayer1C" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 1</option>
              </select>
              <select id="matchPlayer2C" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 2</option>
              </select>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <select id="matchGameC" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Seleccionar Juego</option>
                {games.map(game => (
                  <option value={game}>{game}</option>
                ))}
              </select>
              <select id="matchWinnerC" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Ganador</option>
                <option value="1">Jugador 1</option>
                <option value="2">Jugador 2</option>
              </select>
            </div>
            <div class="flex gap-4">
              <button 
                id="addMatchC"
                class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition"
              >
                Registrar Partido
              </button>
              <button 
                id="resetGroupC"
                class="bg-red-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-red-700 transition"
              >
                üóëÔ∏è Resetear Grupo
              </button>
            </div>
          </div>

          <!-- Historial de Partidos -->
          <div>
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Historial de Partidos
            </h2>
            <div id="matchHistoryC" class="space-y-3">
              <p class="text-gray-500 text-center">No hay partidos registrados</p>
            </div>
          </div>

        </div>
      </div>

      <!-- Grupo D -->
      <div class="group-content hidden" data-group="D">
        <div class="bg-white/90 rounded-2xl shadow-2xl p-8 border-4 border-[var(--color-navbar)]">
          
          <!-- Selector de Jugadores -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Seleccionar Jugadores del Grupo D
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <select id="playerD1" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 1</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerD2" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 2</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerD3" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 3</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
              <select id="playerD4" class="player-select p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 4</option>
                {allPlayers.map(player => (
                  <option value={player.id}>{player.name}</option>
                ))}
              </select>
            </div>
            <button 
              id="saveGroupD"
              class="mt-4 bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition"
            >
              Guardar Grupo D
            </button>
          </div>

          <!-- Tabla de Posiciones -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Tabla de Posiciones
            </h2>
            <div class="overflow-x-auto">
              <table class="w-full border-collapse">
                <thead>
                  <tr class="bg-[var(--color-navbar)]">
                    <th class="p-3 text-left font-bold">Pos</th>
                    <th class="p-3 text-left font-bold">Jugador</th>
                    <th class="p-3 text-center font-bold">PJ</th>
                    <th class="p-3 text-center font-bold">G</th>
                    <th class="p-3 text-center font-bold">P</th>
                    <th class="p-3 text-center font-bold">Pts</th>
                  </tr>
                </thead>
                <tbody id="standingsD">
                  <tr class="border-b">
                    <td colspan="6" class="p-4 text-center text-gray-500">
                      Selecciona los jugadores del grupo
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Registrar Partidos -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Registrar Partido
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <select id="matchPlayer1D" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 1</option>
              </select>
              <select id="matchPlayer2D" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Jugador 2</option>
              </select>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <select id="matchGameD" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Seleccionar Juego</option>
                {games.map(game => (
                  <option value={game}>{game}</option>
                ))}
              </select>
              <select id="matchWinnerD" class="p-3 border-2 border-gray-300 rounded-lg font-semibold">
                <option value="">Ganador</option>
                <option value="1">Jugador 1</option>
                <option value="2">Jugador 2</option>
              </select>
            </div>
            <div class="flex gap-4">
              <button 
                id="addMatchD"
                class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition"
              >
                Registrar Partido
              </button>
              <button 
                id="resetGroupD"
                class="bg-red-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-red-700 transition"
              >
                üóëÔ∏è Resetear Grupo
              </button>
            </div>
          </div>

          <!-- Historial de Partidos -->
          <div>
            <h2 class="text-2xl font-bold mb-4 font-space-mono text-[var(--color-accent)]">
              Historial de Partidos
            </h2>
            <div id="matchHistoryD" class="space-y-3">
              <p class="text-gray-500 text-center">No hay partidos registrados</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  import { initAdminGroups } from '../scripts/administraciongrupos';
  initAdminGroups();
</script>

<style>
  .group-tab.active {
    background-color: var(--color-accent);
    color: white;
  }
</style>